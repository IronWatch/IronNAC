/* This file serves as a reference for appsettings.json, which is not included
 * Through out this file there are a number of fields that must be changed for your setup
 * "example.com" is used as the FQDN of the captive portal server
 * "10.100.0.100" is used as the IP address of the captive portal server
*/

{
  // The Captive Portal Settings
  "CaptivePortal": {
    // The FQDN hostname of the captive portal
    // Ensure that this is resolvable via internal DNS on all networks where clients
    // should be able to manage their devices
    "HostName": "example.com",

    // What addresses the captive portal should listen on
    "ListenAddresses": [
      "10.100.0.100"
    ],

    // What hostnames should bypass the captive portal redirection
    // This should include all addresses the captive portal is reachable on,
    // as well as the FQDN hostname of the portal
    "HostRedirectionBypass": [
      "10.100.0.100",
      "example.com"
    ]
  },

  // The PostgreSQL Connection String
  "ConnectionStrings": {
    "Database": "Host=my_host;Database=my_db;Username=my_user;Password=my_pw"
  },

  // Settings used by the RADIUS server
  "Radius": {
    // The Address the RADIUS server will listen on
    "ListenAddress": "10.100.0.100",

    // Secrets for signing messages
    "AuthorizationSecret": "thesecret",
    "AccountingSecret": "thesecret"
  },

  // The LettuceEncrypt ACME Client settings
  "LettuceEncrypt": {
    // Leave true
    "AcceptTermsOfService": true,

    // This should match the FQDN of the captive portal
    "DomainNames": [ "example.com" ],

    // An Email address to send to Lets Encrypt as an admin contact
    "EmailAddress": "admin@example.com",

    // Leave this as "Dns01"
    "AllowedChallengeTypes": "Dns01",

    // Leave true while testing
    // When ready for production, set to false
    // While staging is true, your testing devices will need to add add the 
    // LetsEncrypt staging root certificates to their trusted stores
    "UseStagingServer": true
  },

  // Lets Encrypt Staging Cert URIs
  "LetsEncrypt": {
    "StageRootCerts": [
      "https://letsencrypt.org/certs/staging/letsencrypt-stg-root-x1.pem",
      "https://letsencrypt.org/certs/staging/letsencrypt-stg-root-x2.pem"
    ]
  },

  // The DNS API settings for DNS-01 ACME Challenge automatation
  "PublicDnsApi": {
    // Currently, only AWS is supported
    "AwsSettings": {
      // The Access Token for the IAM user to use for Route53D
      "AccessToken": "",

      // The Secret Key for the IAM user to use for Route53D
      "SecretKey": "",

      // The region to send API calls to. Route53 management is Global so pick the nearest region to you
      "Region": "",

      // The Hosted Zone ID of the zone containing the captive portal's FQDN
      "HostedZoneId": ""
    }
  },

  // The DNS Redirection Server Settings
  "DnsServer": {

    // The Address the DNS server will listen on
    "ListenAddress": "10.100.0.100",

    // The Address given out in DNS responses
    // This should be an address that the captive portal is listening on!
    "RedirectAddress": "10.100.0.100"
  },

  // Logging Settings
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },

  // CORS settings
  // Leave as "*" unless you know what you are doing
  "AllowedHosts": "*"
}
